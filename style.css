/* :root에 CSS 변수(커스텀 프로퍼티)를 정의하여 색상 및 스타일 관리를 용이하게 합니다. */
:root {
    --bg-dark-blue: #2c3e50;
    --bg-mid-blue: #34495e;
    --text-light: #ecf0f1;
    --border-light: #7f8c8d;
    --primary-red: #e74c3c;
    --primary-red-hover: #c0392b;
    --secondary-orange: #f39c12;
    --secondary-orange-hover: #e67e22;
    --tertiary-blue: #3498db;
    --tertiary-blue-hover: #2980b9;
    --disabled-gray: #7f8c8d;
    --board-bg: #000;
}

/* 기본 스타일 초기화 및 페이지 전체 스타일 */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-dark-blue); /* 어두운 배경색 */
    color: var(--text-light); /* 밝은 글자색 */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
}

h1 {
    color: var(--primary-red);
    text-shadow: 2px 2px 4px #000;
}

/* 게임 전체를 감싸는 컨테이너 */
.game-container {
    display: flex;
    gap: 20px; /* 게임 보드와 사이드바 사이 간격 */
    border: 3px solid var(--text-light);
    padding: 20px;
    border-radius: 10px;
    background-color: var(--bg-mid-blue);
    align-items: stretch; /* 자식 요소(게임 보드, 사이드바)의 높이를 강제로 동일하게 확장합니다. */
}

/* 게임 보드를 감싸는 래퍼 (플로팅 텍스트를 위함) */
.game-board-wrapper {
    position: relative;
}

/* 게임 보드 (Canvas) */
#game-board {
    border: 2px solid var(--border-light);
    background-color: var(--board-bg); /* 블록이 잘 보이도록 검은색 배경 */
    position: relative; /* For game over overlay */
}

/* 사이드바 스타일 */
.sidebar {
    display: flex;
    flex-direction: column;
    gap: 15px; /* 상단 요소들 사이의 간격을 설정합니다. */
    width: 150px; /* PC 화면에 맞게 너비 복원 */
    text-align: center; 
    background-color: var(--bg-dark-blue); /* 사이드바 전체에 배경색을 적용하여 하나의 패널처럼 보이게 합니다. */
    padding: 20px;
    border-radius: 5px;
}

.sidebar div {
    /* 개별 정보 섹션의 배경, 패딩, 테두리를 제거하고 부모인 .sidebar에서 관리합니다. */
    background-color: transparent;
    padding: 0;
}

.sidebar h2 {
    margin: 0 0 10px 0;
    font-size: 1.2em;
    color: var(--primary-red);
}

.sidebar p {
    margin: 0;
    font-size: 1.5em;
    font-weight: bold;
}

/* 다음 블록, 홀드 블록을 보여주는 Canvas 공통 스타일 */
#next-piece, #hold-piece {
    background-color: var(--board-bg);
    border: 2px solid var(--border-light);
}

/* 버튼 공통 스타일 */
.sidebar .button-group button {
    padding: 15px;
    font-size: 1em;
    font-weight: bold;
    color: #fff;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.sidebar .button-group {
    background-color: transparent;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-top: auto; /* 이 속성이 버튼 그룹을 컨테이너의 맨 아래로 밀어냅니다. */
}

#start-btn {
    background-color: var(--primary-red);
}
#start-btn:hover {
    background-color: var(--primary-red-hover);
}
#pause-btn {
    background-color: var(--secondary-orange); /* 주황색 */
}
#pause-btn:hover {
    background-color: var(--secondary-orange-hover);
}
#restart-btn {
    background-color: var(--tertiary-blue); /* 파란색 */
}
#restart-btn:hover {
    background-color: var(--tertiary-blue-hover);
}

/* 사운드 버튼 스타일 */
#sound-btn {
    background-color: #2ecc71; /* ON 상태일 때 초록색 */
}
#sound-btn:hover {
    background-color: #27ae60;
}
#sound-btn.sound-off {
    background-color: var(--disabled-gray); /* OFF 상태일 때 회색 */
    color: var(--text-light);
}

/* 난이도 선택 스타일 */
#difficulty-selector {
    /* 부모인 .sidebar에서 스타일을 관리하므로 개별 스타일을 제거하여 일관성을 유지합니다. */
    padding: 0;
}

#difficulty-selector .options {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 5px;
}

/* 난이도 옵션 아이템 (라디오 버튼 + 라벨)을 한 줄로 묶기 위한 스타일 */
.option-item {
    display: flex;
    align-items: center;
    gap: 5px;
}

#difficulty-selector label {
    cursor: pointer;
    font-size: 1em;
}

#difficulty-selector input[type="radio"] {
    cursor: pointer;
    accent-color: var(--primary-red);
    width: 16px;
    height: 16px;
}

.sidebar button:disabled {
    background-color: var(--disabled-gray);
    cursor: not-allowed;
}

/* 보너스 텍스트 애니메이션 */
.floating-text {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translateX(-50%);
    font-size: 1.8em;
    font-weight: bold;
    color: #f1c40f; /* 노란색 강조 */
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8);
    pointer-events: none;
    animation: floatUpAndFade 1.5s ease-out forwards;
    text-align: center;
    z-index: 100;
    line-height: 1.2;
}

@keyframes floatUpAndFade {
    0% {
        opacity: 1;
        transform: translate(-50%, 0);
    }
    100% { opacity: 0; transform: translate(-50%, -80px); }
}

/* 반응형 디자인: 모바일 */
body.mobile {
    justify-content: flex-start; /* 상단 정렬 */
    padding-top: 1rem;
}

body.mobile .game-container {
    transform: scale(0.85);
    transform-origin: top center;
}

/* Touch Controls */
#touch-controls {
    display: none; /* Hidden by default, shown via JS */
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 15px;
    padding-bottom: calc(15px + env(safe-area-inset-bottom)); /* iPhone 등 하단 홈 바 영역을 침범하지 않도록 안전 여백 추가 */
    box-sizing: border-box;
    justify-content: space-between;
    align-items: flex-end;
    pointer-events: none;
}

body.mobile #touch-controls {
    display: flex;
}

.touch-group {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    pointer-events: auto;
}

.touch-group .row {
    display: flex;
    gap: 15px;
}

.touch-group button {
    width: 60px;
    height: 60px;
    font-size: 1.8em;
    border: 2px solid var(--text-light);
    background-color: rgba(44, 62, 80, 0.7); /* var(--bg-dark-blue) with alpha */
    color: var(--text-light);
    border-radius: 15px;
    -webkit-tap-highlight-color: transparent;
    display: flex;
    justify-content: center;
    align-items: center;
}

.touch-group button:active {
    background-color: rgba(231, 76, 60, 0.7); /* var(--primary-red) with alpha */
}

.touch-actions {
    flex-direction: row;
}
